"use strict";(self.webpackChunkprogetto_angular_1=self.webpackChunkprogetto_angular_1||[]).push([[110],{1110:(F,d,e)=>{e.r(d),e.d(d,{LoginModule:()=>U});var c=e(6895),l=e(9299),f=e(529),n=e(4006),t=e(4650),Z=e(1228),s=e(3546),h=e(4144),u=e(9549),p=e(4859);function L(o,a){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," The email and token were not recognized "),t.qZA())}const T=[{path:"",component:(()=>{class o{constructor(r,i,m){this.router=r,this.authService=i,this.http=m,this.loginValid=!0}ngOnInit(){this.loginForm=new n.cw({email:new n.NI("",[n.kI.email]),token:new n.NI("",[n.kI.minLength(64)])})}onSubmit(){const r=new f.WM({Authorization:`Bearer ${this.loginForm.value.token}`}),i=this.loginForm.value.email,m=this.loginForm.value.token;this.http.get(`${this.authService.usersUlr}`,{headers:r}).subscribe({next:g=>{const v=g.find(b=>b.email===i);v&&(alert("Login Succesful"),this.authService.login(v),this.authService.setToken(m),this.loginForm.reset(),this.loginValid=!0,this.router.navigate(["home"]))},error:g=>{401==g.status&&(alert("Token is not valid!"),this.loginForm.reset())}})}}return o.\u0275fac=function(r){return new(r||o)(t.Y36(l.F0),t.Y36(Z.e),t.Y36(f.eN))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-login"]],decls:29,vars:3,consts:[[1,"main-div"],[3,"formGroup","ngSubmit"],[4,"ngIf"],["matInput","","formControlName","email","required",""],["matInput","","type","text","formControlName","token","required",""],["mat-raised-button","","color","primary",3,"disabled"],["routerLink","/register"]],template:function(r,i){1&r&&(t.TgZ(0,"div",0)(1,"mat-card")(2,"mat-card-content")(3,"form",1),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(4,"h2"),t._uU(5,"LOGIN"),t.qZA(),t.YNc(6,L,2,0,"mat-error",2),t.TgZ(7,"mat-form-field")(8,"mat-label"),t._uU(9,"Email"),t.qZA(),t._UZ(10,"input",3),t.TgZ(11,"mat-error"),t._uU(12," Please provide a valid email address "),t.qZA()(),t._UZ(13,"br"),t.TgZ(14,"mat-form-field")(15,"mat-label"),t._uU(16,"Token"),t.qZA(),t._UZ(17,"input",4),t.TgZ(18,"mat-error"),t._uU(19," Please provide a valid token "),t.qZA()(),t._UZ(20,"br"),t.TgZ(21,"button",5),t._uU(22,"Login"),t.qZA(),t._UZ(23,"br")(24,"br"),t.TgZ(25,"p"),t._uU(26,"Don't have an account? "),t.TgZ(27,"a",6),t._uU(28,"Register here"),t.qZA()()()()()()),2&r&&(t.xp6(3),t.Q6J("formGroup",i.loginForm),t.xp6(3),t.Q6J("ngIf",!i.loginValid),t.xp6(15),t.Q6J("disabled",!i.loginForm.valid))},dependencies:[c.O5,l.rH,s.a8,s.dn,n._Y,n.Fj,n.JJ,n.JL,n.Q7,n.sg,n.u,h.Nt,u.KE,u.hX,u.TO,p.lW],styles:[".main-div[_ngcontent-%COMP%]{height:100vh;display:flex;justify-content:center;align-items:center;border-radius:100%}mat-card[_ngcontent-%COMP%]{text-align:center;border:solid}mat-form-field[_ngcontent-%COMP%]{display:block}form[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{background-color:#000;color:#fff}"]}),o})()}];let C=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[l.Bz.forChild(T),l.Bz]}),o})(),U=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[c.ez,C,s.QW,n.u5,n.UX,h.c,p.ot]}),o})()}}]);