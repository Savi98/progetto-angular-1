"use strict";(self.webpackChunkprogetto_angular_1=self.webpackChunkprogetto_angular_1||[]).push([[711],{4711:(X,C,i)=>{i.r(C),i.d(C,{PostModule:()=>W});var u=i(6895),h=i(9299),r=i(7155),p=i(7340),d=i(4006),t=i(4650),w=i(9106),Z=i(5412),_=i(4144),g=i(9549),c=i(3546),x=i(4859);let v=(()=>{class e{constructor(n,o,l){this.router=n,this.postService=o,this.dialogRef=l}ngOnInit(){this.newPostForm=new d.cw({title:new d.NI,body:new d.NI})}onAddPost(){const l={user_id:JSON.parse(localStorage.getItem("user")).user.id,title:this.newPostForm.value.title,body:this.newPostForm.value.body};this.postService.newUser(l).subscribe({next:m=>{window.alert("Post added!"),this.dialogRef.close([])},error:m=>{console.log(m)}})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(h.F0),t.Y36(w.P),t.Y36(Z.so))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-post"]],decls:24,vars:2,consts:[[1,"main-div"],[3,"formGroup","ngSubmit"],["matInput","","formControlName","title","required",""],["matInput","","formControlName","body","required",""],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"mat-card")(2,"mat-card-content")(3,"form",1),t.NdJ("ngSubmit",function(){return o.onAddPost()}),t.TgZ(4,"h2"),t._uU(5,"ADD POST"),t.qZA(),t.TgZ(6,"mat-form-field")(7,"mat-label"),t._uU(8,"Title"),t.qZA(),t._UZ(9,"input",2),t.TgZ(10,"mat-error"),t._uU(11," Name is mandatory "),t.qZA()(),t._UZ(12,"br"),t.TgZ(13,"mat-form-field")(14,"mat-label"),t._uU(15,"Comment"),t.qZA(),t._UZ(16,"input",3),t.TgZ(17,"mat-error"),t._uU(18," Email is mandatory "),t.qZA()(),t._UZ(19,"br"),t.TgZ(20,"button",4),t._uU(21,"Add"),t.qZA(),t._UZ(22,"br")(23,"br"),t.qZA()()()()),2&n&&(t.xp6(3),t.Q6J("formGroup",o.newPostForm),t.xp6(17),t.Q6J("disabled",!o.newPostForm.valid))},dependencies:[d._Y,d.Fj,d.JJ,d.JL,d.Q7,d.sg,d.u,_.Nt,g.KE,g.hX,g.TO,c.a8,c.dn,x.lW]}),e})();var y=i(1228),P=i(7974),O=i(1511),b=i(3683),T=i(7392);function A(e,a){if(1&e&&(t.TgZ(0,"th",20),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,n)," ")}}function M(e,a){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&e){const n=a.$implicit,o=t.oxw().$implicit;t.xp6(1),t.hij("",n[o]," ")}}function S(e,a){1&e&&(t.ynx(0,18),t.YNc(1,A,3,3,"th",19),t.YNc(2,M,2,1,"td",12),t.BQk()),2&e&&t.s9C("matColumnDef",a.$implicit)}function N(e,a){1&e&&(t.TgZ(0,"th",22),t._uU(1,"\xa0"),t.qZA())}function D(e,a){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"keyboard_arrow_down"),t.qZA())}function U(e,a){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"keyboard_arrow_up"),t.qZA())}function I(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"td",21)(1,"button",23),t.NdJ("click",function(l){const s=t.CHM(n).$implicit,f=t.oxw();return f.expandedElement=f.expandedElement===s?null:s,t.KtG(l.stopPropagation())}),t.YNc(2,D,2,0,"mat-icon",24),t.YNc(3,U,2,0,"mat-icon",24),t.qZA()()}if(2&e){const n=a.$implicit,o=t.oxw();t.xp6(2),t.Q6J("ngIf",o.expandedElement!==n),t.xp6(1),t.Q6J("ngIf",o.expandedElement===n)}}function J(e,a){if(1&e&&(t.TgZ(0,"mat-card-header")(1,"mat-card-title"),t._uU(2),t.qZA(),t.TgZ(3,"mat-card-subtitle"),t._uU(4),t.qZA()()),2&e){const n=a.$implicit;t.xp6(2),t.Oqu(n.name),t.xp6(2),t.Oqu(n.body)}}function Y(e,a){if(1&e&&(t.TgZ(0,"mat-card"),t.YNc(1,J,5,2,"mat-card-header",30),t.qZA()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",n.comments)}}function E(e,a){1&e&&(t.TgZ(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),t._uU(3,"No comments"),t.qZA()()())}function F(e,a){if(1&e&&(t.TgZ(0,"td",21)(1,"div",25)(2,"div",26)(3,"div",27),t._uU(4),t.qZA(),t.YNc(5,Y,2,1,"mat-card",28),t.YNc(6,E,4,0,"ng-template",null,29,t.W1O),t.qZA()()()),2&e){const n=a.$implicit,o=t.MAs(7),l=t.oxw();t.uIk("colspan",l.columnsToDisplayWithExpand.length),t.xp6(1),t.Q6J("@detailExpand",n==l.expandedElement?"expanded":"collapsed"),t.xp6(3),t.hij(" ",n.body," "),t.xp6(1),t.Q6J("ngIf",(null==n.comments?null:n.comments.length)>0)("ngIfElse",o)}}function k(e,a){1&e&&t._UZ(0,"tr",31)}function Q(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"tr",32),t.NdJ("click",function(){const m=t.CHM(n).$implicit,s=t.oxw();return t.KtG(s.expandedElement=s.expandedElement===m?null:m)}),t.qZA()}if(2&e){const n=a.$implicit,o=t.oxw();t.ekj("example-expanded-row",o.expandedElement===n)}}function z(e,a){1&e&&t._UZ(0,"tr",33)}const R=function(){return["expandedDetail"]},j=[{path:"",component:(()=>{class e{constructor(n,o,l,m,s,f){this.router=n,this.authService=o,this._MatPaginatorIntl=l,this.dialog=m,this.postService=s,this.commentService=f,this.pageIndex=0,this.pageSize=10,this.pageSizeOptions=[10,25,50],this.displayedColumns=["title"],this.columnsToDisplayWithExpand=[...this.displayedColumns,"expand"]}ngOnInit(){this.loadPosts(this.pageIndex,this.pageSize),this._MatPaginatorIntl.itemsPerPageLabel="Posts per page"}backHome(){this.router.navigate(["/home"])}onLogout(){this.authService.logout(),this.router.navigate(["/login"])}openDialog(n,o){this.dialog.open(v,{width:"250px",enterAnimationDuration:n,exitAnimationDuration:o})}applyFilter(n){this.dataSource.filter=n.target.value.trim().toLowerCase()}loadPosts(n,o){this.postService.getAllPosts(n,o).subscribe(l=>{this.allPosts=l.body,this.allPosts?.forEach(m=>{this.commentService.getCommentUsers(m.id).subscribe(s=>{m.comments=s})}),this.length=l.headers.get("x-pagination-total"),this.dataSource=new r.by(this.allPosts)})}onPageChange(n){this.pageIndex=n.pageIndex,this.pageSize=n.pageSize,this.loadPosts(this.pageIndex,this.pageSize)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(h.F0),t.Y36(y.e),t.Y36(P.ye),t.Y36(Z.uw),t.Y36(w.P),t.Y36(O.O))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-post"]],decls:32,vars:11,consts:[["mat-icon-button","",3,"click"],[1,"add-post"],["mat-fab","",3,"click"],[1,"view-posts"],[1,"search-bar"],["matInput","",3,"keyup"],["input",""],[1,"table-container","mat-elevation-z8"],["mat-table","","multiTemplateDataRows","",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["matColumnDef","expand"],["mat-header-cell","","aria-label","row actions",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","expandedDetail"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","class","example-element-row",3,"example-expanded-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","example-detail-row",4,"matRowDef","matRowDefColumns"],[3,"length","pageIndex","pageSize","pageSizeOptions","page"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","aria-label","row actions"],["mat-icon-button","","aria-label","expand row",3,"click"],[4,"ngIf"],[1,"example-element-detail"],[1,"example-element-diagram"],[1,"example-element-position"],[4,"ngIf","ngIfElse"],["noComments",""],[4,"ngFor","ngForOf"],["mat-header-row",""],["mat-row","",1,"example-element-row",3,"click"],["mat-row","",1,"example-detail-row"]],template:function(n,o){1&n&&(t.TgZ(0,"mat-toolbar")(1,"button",0),t.NdJ("click",function(){return o.backHome()}),t.TgZ(2,"mat-icon"),t._uU(3,"home"),t.qZA()(),t.TgZ(4,"button",0),t.NdJ("click",function(){return o.onLogout()}),t.TgZ(5,"mat-icon"),t._uU(6,"exit_to_app"),t.qZA()()(),t.TgZ(7,"div",1)(8,"button",2),t.NdJ("click",function(){return o.openDialog("0ms","0ms")}),t.TgZ(9,"mat-icon"),t._uU(10,"forum"),t.qZA()()(),t.TgZ(11,"div",3),t._UZ(12,"div"),t.TgZ(13,"div",4)(14,"mat-form-field")(15,"mat-label"),t._uU(16,"Search"),t.qZA(),t.TgZ(17,"input",5,6),t.NdJ("keyup",function(m){return o.applyFilter(m)}),t.qZA()()(),t._UZ(19,"div"),t.qZA(),t.TgZ(20,"div",7)(21,"table",8),t.YNc(22,S,3,1,"ng-container",9),t.ynx(23,10),t.YNc(24,N,2,0,"th",11),t.YNc(25,I,4,2,"td",12),t.BQk(),t.ynx(26,13),t.YNc(27,F,8,5,"td",12),t.BQk(),t.YNc(28,k,1,0,"tr",14),t.YNc(29,Q,1,2,"tr",15),t.YNc(30,z,1,0,"tr",16),t.qZA()(),t.TgZ(31,"mat-paginator",17),t.NdJ("page",function(m){return o.onPageChange(m)}),t.qZA()),2&n&&(t.xp6(21),t.Q6J("dataSource",o.dataSource),t.xp6(1),t.Q6J("ngForOf",o.displayedColumns),t.xp6(6),t.Q6J("matHeaderRowDef",o.columnsToDisplayWithExpand)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.columnsToDisplayWithExpand),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(10,R)),t.xp6(1),t.Q6J("length",o.length)("pageIndex",o.pageIndex)("pageSize",o.pageSize)("pageSizeOptions",o.pageSizeOptions))},dependencies:[u.sg,u.O5,b.Ye,_.Nt,g.KE,g.hX,c.a8,c.dk,c.$j,c.n5,T.Hw,x.RK,x.cs,P.NW,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,u.rS],styles:[".mat-toolbar-single-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;height:10%;place-items:center}.add-post[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:10px}.add-post[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{background-color:#000}.view-posts[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr 1fr;margin-top:30px}.search-bar[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column}a[_ngcontent-%COMP%]{text-decoration:none;color:#000}.remove[_ngcontent-%COMP%]{border:solid}mat-paginator[_ngcontent-%COMP%]{position:fixed;bottom:0;width:-webkit-fill-available;border:solid}.mat-mdc-paginator-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap-reverse;width:100%}.table-container[_ngcontent-%COMP%]{height:350px;width:90%;margin:auto;overflow:auto}@media (max-width: 300px) and (max-height: 750px){.table-container[_ngcontent-%COMP%]{height:300px;width:100%}}@media (min-width: 301px) and (max-width: 950px) and (max-height: 750px){.table-container[_ngcontent-%COMP%]{height:300px}}@media (min-width: 301px) and (max-width: 950px) and (min-height: 751px) and (max-height: 950px){.table-container[_ngcontent-%COMP%]{height:500px}}@media (min-width: 301px) and (max-width: 950px) and (min-height: 751px) and (max-height: 1100px){.table-container[_ngcontent-%COMP%]{height:500px}}@media (min-width: 301px) and (max-width: 950px) and (min-height: 1101px){.table-container[_ngcontent-%COMP%]{height:800px}}@media (min-width: 951px) and (min-height: 600px) and (max-height: 699px){.table-container[_ngcontent-%COMP%]{height:250px}}@media (min-width: 951px) and (min-height: 1102px){.table-container[_ngcontent-%COMP%]{height:800px}}table[_ngcontent-%COMP%]{width:100%}tr.example-detail-row[_ngcontent-%COMP%]{height:0}tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):hover{background:whitesmoke}tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):active{background:#efefef}.example-element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.example-element-detail[_ngcontent-%COMP%]{overflow:hidden;display:flex}.example-element-diagram[_ngcontent-%COMP%]{min-width:80px;padding:8px;font-weight:lighter;margin:8px 0;height:104px}.example-element-symbol[_ngcontent-%COMP%]{line-height:normal}.example-element-description[_ngcontent-%COMP%]{padding:16px}.example-element-description-attribution[_ngcontent-%COMP%]{opacity:.5}.example-element-diagram[_ngcontent-%COMP%]{height:auto}"],data:{animation:[(0,p.X$)("detailExpand",[(0,p.SB)("collapsed",(0,p.oB)({height:"0px",minHeight:"0"})),(0,p.SB)("expanded",(0,p.oB)({height:"*"})),(0,p.eR)("expanded <=> collapsed",(0,p.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),e})()}];let B=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[h.Bz.forChild(j),h.Bz]}),e})();var $=i(8255),H=i(782),q=i(3805);let W=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.ez,B,b.g0,d.u5,d.UX,_.c,c.QW,$.Tx,T.Ps,x.ot,H.N6,q.Bb,P.TU,r.p0,g.lN]}),e})()}}]);