"use strict";(self.webpackChunkprogetto_angular_1=self.webpackChunkprogetto_angular_1||[]).push([[110],{1110:(F,d,e)=>{e.r(d),e.d(d,{LoginModule:()=>C});var c=e(6895),m=e(9299),f=e(529),o=e(4006),t=e(4650),Z=e(1228),u=e(3546),h=e(4144),s=e(9549),p=e(4859);function L(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," The email and token were not recognized "),t.qZA())}const U=[{path:"",component:(()=>{class n{constructor(r,i,l){this.router=r,this.authService=i,this.http=l,this.loginValid=!0}ngOnInit(){this.loginForm=new o.cw({name:new o.NI,email:new o.NI("",[o.kI.email]),token:new o.NI("",[o.kI.minLength(64)])})}onSubmit(){const r=new f.WM({Authorization:`Bearer ${this.loginForm.value.token}`}),i=this.loginForm.value.name,l=this.loginForm.value.email,b=this.loginForm.value.token;this.http.get(`${this.authService.usersUlr}`,{headers:r}).subscribe({next:g=>{g.find(v=>v.email===l&&v.name==i)&&(alert("Login Succesful"),this.authService.login(b,l,i),this.loginForm.reset(),this.loginValid=!0,this.router.navigate(["home"]))},error:g=>{401==g.status&&(alert("Token is not valid!"),this.loginForm.reset())}})}}return n.\u0275fac=function(r){return new(r||n)(t.Y36(m.F0),t.Y36(Z.e),t.Y36(f.eN))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-login"]],decls:36,vars:3,consts:[[1,"main-div"],[3,"formGroup","ngSubmit"],[4,"ngIf"],["matInput","","formControlName","name","required",""],["matInput","","formControlName","email","required",""],["matInput","","type","text","formControlName","token","required",""],["mat-raised-button","","color","primary",3,"disabled"],["routerLink","/register"]],template:function(r,i){1&r&&(t.TgZ(0,"div",0)(1,"mat-card")(2,"mat-card-content")(3,"form",1),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(4,"h2"),t._uU(5,"LOGIN"),t.qZA(),t.YNc(6,L,2,0,"mat-error",2),t.TgZ(7,"mat-form-field")(8,"mat-label"),t._uU(9,"Name"),t.qZA(),t._UZ(10,"input",3),t.TgZ(11,"mat-error"),t._uU(12," Please provide a valid name "),t.qZA()(),t._UZ(13,"br"),t.TgZ(14,"mat-form-field")(15,"mat-label"),t._uU(16,"Email"),t.qZA(),t._UZ(17,"input",4),t.TgZ(18,"mat-error"),t._uU(19," Please provide a valid email address "),t.qZA()(),t._UZ(20,"br"),t.TgZ(21,"mat-form-field")(22,"mat-label"),t._uU(23,"Token"),t.qZA(),t._UZ(24,"input",5),t.TgZ(25,"mat-error"),t._uU(26," Please provide a valid token "),t.qZA()(),t._UZ(27,"br"),t.TgZ(28,"button",6),t._uU(29,"Login"),t.qZA(),t._UZ(30,"br")(31,"br"),t.TgZ(32,"p"),t._uU(33,"Don't have an account? "),t.TgZ(34,"a",7),t._uU(35,"Register here"),t.qZA()()()()()()),2&r&&(t.xp6(3),t.Q6J("formGroup",i.loginForm),t.xp6(3),t.Q6J("ngIf",!i.loginValid),t.xp6(22),t.Q6J("disabled",!i.loginForm.valid))},dependencies:[c.O5,m.rH,u.a8,u.dn,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.sg,o.u,h.Nt,s.KE,s.hX,s.TO,p.lW],styles:[".main-div[_ngcontent-%COMP%]{height:100vh;display:flex;justify-content:center;align-items:center;border-radius:100%}mat-card[_ngcontent-%COMP%]{text-align:center;border:solid}mat-form-field[_ngcontent-%COMP%]{display:block}form[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{background-color:#000;color:#fff}"]}),n})()}];let T=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[m.Bz.forChild(U),m.Bz]}),n})(),C=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.ez,T,u.QW,o.u5,o.UX,h.c,p.ot]}),n})()}}]);